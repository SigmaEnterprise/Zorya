{{ if ne .Site.Params.hideMadeWithLine true }}Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>{{ end }}

<div id="nostr-feed"></div>

<script>
    async function fetchNostrFeed(pubkey, relay) {
        console.log("Connecting to relay:", relay);

        const socket = new WebSocket(relay);

        socket.onopen = () => {
            console.log("WebSocket connected!");

            const filter = {
                "kinds": [1],  // Kind 1 = Text Notes
                "authors": [pubkey],
                "limit": 5
            };

            socket.send(JSON.stringify(["REQ", "nostr-feed", filter]));
            console.log("Sent request:", filter);
        };

        socket.onerror = (error) => {
            console.error("WebSocket error:", error);
        };

        socket.onmessage = (event) => {
            console.log("Received data:", event.data);

            const data = JSON.parse(event.data);
            if (data[0] !== "EVENT") return;

            const eventContent = data[2];
            const postContainer = document.getElementById("nostr-feed");

            const postElement = document.createElement("div");
            postElement.innerHTML = `<p>${eventContent.content}</p><hr>`;
            postContainer.appendChild(postElement);
        };
    }

    document.addEventListener("DOMContentLoaded", function() {
        fetchNostrFeed("npub16d8gxt2z4k9e8sdpc0yyqzf5gp0np09ls4lnn630qzxzvwpl0rgq5h4rzv", "wss://relay.nostr.band");
    });
</script>





<button
        data-npub="npub16d8gxt2z4k9e8sdpc0yyqzf5gp0np09ls4lnn630qzxzvwpl0rgq5h4rzv"
        data-relays="wss://relay.damus.io,wss://relay.snort.social,wss://nostr.wine,wss://relay.nostr.band,wss://nos.lol"
    >
        Zap Me ⚡️
    </button>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/nostr-zap@0.22.0"></script>